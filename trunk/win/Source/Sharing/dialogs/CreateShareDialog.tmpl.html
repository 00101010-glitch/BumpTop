{#
 Copyright 2011 Google Inc. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
#}

{% extends "../Sharing/dialogs/dialogs_common.tmpl.html" %}

{% block dialog_head %}
	<script type="text/javascript">
		// This is commented out because we currently have not implemented a way of emailing users with an autogenerated password
		/*$(window).load(function () {
			$("#password").hide();
			$("#passwordAlert").hide();
			
			// Autogenerate password
			var validChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"; 
			var password = "";
			for ( var i = 0; i < 8; i++ ) {
				password = password + validChars[Math.floor(Math.random() * validChars.length)]; 
			}
			$("#password").val(password);
		});*/
		
		$(document).ready(function(){
			$("#dropName").keyup(function() {
				var dropNameString = $("#dropName").val();
				// Ignore apostrophes, and replace other non-alphanumeric chars with underscore.
				// (Only alphanumeric and underscore are allowed in drop names)
				dropNameString = dropNameString.replace(/\'/g, "");
				dropNameString = dropNameString.replace(/\W/g, "_");
				$("#dropUrl").text("http://drop.io/" + dropNameString);
			});
			// This is commented out because we currently have not implemented a way of emailing users with an autogenerated password
			/*$("#passwordLink").click(function() {
				if ($("#password").is(":hidden")) {
					$("#password").slideDown("fast");
				} else {
					$("#password").slideUp("fast");
				}
			});*/
		});
	</script>
{% endblock dialog_head %}
	
{% block dialog_content %}
	<div id="content">
		<p class="fieldlabel">{{ _("Choose your new Shared Wall name:") }}</p>	
		<input type="text" id="dropName" /><br/>
		Public Link: <span id="dropUrl" class="light">http://drop.io/</span><br/><br/>
		<hr/>

		<p class="fieldlabel">{{ _("Email Address <em>(required)</em>:") }}</p>
		<input type="text" id="email" /><br/>
		<input type="checkbox" id="email_updates" disabled="true" checked="yes" 
/><span class="light">{{ _("Email me when files are added or removed") }} (FIXME)</span>

		<hr/>

		<p class="fieldlabel">{{ _("Administrator Password <em>(optional)</em>:") }}</p>
		<input type="password" id="password" />

		<p class="fieldlabel">{{ _("Guest Password <em>(optional)</em>:") }}</p>
		<input type="password" id="publicPassword" />

		<hr id="bottomdivider"/>
		<div class="right">
			<a class="buttonlink" href="#" id="cancelButton"><span class="grey button">Cancel</span></a>
			&nbsp;&nbsp;
			<a class="buttonlink" href="#" id="okButton"><span class="blue button">Connect</span></a>
		</div>
		<hr id="clear"/>
	</div>
{% endblock dialog_content %}
